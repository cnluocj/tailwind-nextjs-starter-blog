---
title: 'Oracle Cloud å®ä¾‹å¼€é€šå¹¶æ‰“é€šç½‘ç»œç«¯å£å…¨æµç¨‹'
date: '2025-07-10'
tags: ['Oracle Cloud', 'OCI', 'VCN', 'ç½‘ç»œé…ç½®', 'iptables', 'äº‘æœåŠ¡å™¨']
draft: false
summary: 'è¯¦ç»†è®°å½•åœ¨ Oracle Cloudï¼ˆOCIï¼‰ä¸Šä»å®ä¾‹åˆ›å»ºåˆ°æˆåŠŸå¼€æ”¾ç½‘ç»œç«¯å£çš„å®Œæ•´æ­¥éª¤ï¼ŒåŒ…æ‹¬ VCN é…ç½®ã€Security List è®¾ç½®å’Œå®ä¾‹å†…éƒ¨é˜²ç«å¢™é…ç½®ï¼Œä¾¿äºä»Šåå¤ç”¨æˆ–å†™æˆæ–‡æ¡£ã€‚'
---

## âœ… Oracle Cloud å®ä¾‹å¼€é€šå¹¶æ‰“é€šç½‘ç»œç«¯å£å…¨æµç¨‹

### ğŸŸ¢ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºå®ä¾‹

1. ç™»å½• Oracle Cloud æ§åˆ¶å°
2. è¿›å…¥ã€ŒCompute â†’ Instancesã€ç‚¹å‡» Create instance
3. é€‰æ‹©ï¼š
   - å®ä¾‹åç§°
   - é•œåƒï¼ˆé€šå¸¸é€‰ Ubuntu æˆ– Oracle Linuxï¼‰
   - å½¢çŠ¶ï¼ˆShapeï¼‰ï¼šæ¯”å¦‚ VM.Standard.A1.Flex
   - SSH å…¬é’¥
   - åˆ›å»ºæ—¶é€‰æ‹©æˆ–æ–°å»º VCNï¼ˆè™šæ‹Ÿäº‘ç½‘ç»œï¼‰

---

### ğŸŸ¢ ç¬¬äºŒæ­¥ï¼šé…ç½® VCN åŠç½‘ç»œç»„ä»¶

#### ğŸ”¹1. é…ç½® Subnet

- ä¿è¯ Subnet ç±»å‹ä¸º Public Subnet
- CIDR ä¸€èˆ¬ä¸º 10.0.0.0/16

#### ğŸ”¹2. åˆ›å»º Internet Gateway

- åœ¨ VCN ä¸­ â†’ Gateways â†’ åˆ›å»º Internet Gateway
- å‘½åä¸º Internet Gateway for VCN-xxxxï¼ˆä½ å·²åˆ›å»ºæˆåŠŸï¼‰

#### ğŸ”¹3. é…ç½® Route Table

- é»˜è®¤ Route Table ä¸­æ–°å¢è·¯ç”±è§„åˆ™ï¼š

| Destination CIDR | Target           |
| ---------------- | ---------------- |
| 0.0.0.0/0        | Internet Gateway |

---

### ğŸŸ¢ ç¬¬ä¸‰æ­¥ï¼šé…ç½® Security Listï¼ˆç½‘ç»œå®‰å…¨ç»„ï¼‰

åœ¨ VCN é‡Œæ‰¾åˆ°å¯¹åº”çš„ Security Listï¼Œæ·»åŠ  Ingress Rulesï¼š

#### åŸºç¡€ç«¯å£å¼€æ”¾ï¼š

| åè®® | æ¥æº      | ç«¯å£èŒƒå›´   | ç”¨é€”                         |
| ---- | --------- | ---------- | ---------------------------- |
| TCP  | 0.0.0.0/0 | 22         | SSH ç™»å½•                     |
| ICMP | 0.0.0.0/0 | ç±»å‹ 8     | ping è¯·æ±‚ï¼ˆEchoï¼‰            |
| TCP  | 0.0.0.0/0 | è‡ªå®šä¹‰ç«¯å£ | ä¾‹å¦‚ï¼šVPNã€Web ç­‰æœåŠ¡ç«¯å£    |
| UDP  | 0.0.0.0/0 | è‡ªå®šä¹‰ç«¯å£ | ä¾‹å¦‚ï¼šWireGuardã€sing-box ç­‰ |

ä½ è¿™æ¬¡æ·»åŠ äº†ï¼š

- TCP: All â†’ å…¨ç«¯å£
- UDP: All â†’ å…¨ç«¯å£
- ICMP: type 8 â†’ æ”¯æŒ ping
- âœ… å·²å®Œå…¨æ”¾å¼€è®¿é—®

---

### ğŸŸ¢ ç¬¬å››æ­¥ï¼šå®ä¾‹å†…éƒ¨é˜²ç«å¢™é…ç½®ï¼ˆiptablesï¼‰

OCI é»˜è®¤é•œåƒå¯èƒ½ä»å¯ç”¨ iptables æ‹¦æˆªéƒ¨åˆ†ç«¯å£ï¼Œå³ä½¿äº‘ç«¯æ”¾è¡Œäº†ä¹Ÿæ— æ³•è®¿é—®ã€‚

#### æ£€æŸ¥ï¼š

```bash
sudo iptables -L -n
```

å‘ç°å­˜åœ¨ï¼š

```
REJECT     all  --  0.0.0.0/0            0.0.0.0/0            reject-with icmp-host-prohibited
```

#### ä¸´æ—¶æ”¾è¡ŒæœåŠ¡ç«¯å£ï¼š

```bash
sudo iptables -I INPUT -p tcp --dport 17871 -j ACCEPT
sudo iptables -I INPUT -p udp --dport 17871 -j ACCEPT
```

#### ï¼ˆå¯é€‰ï¼‰æ°¸ä¹…å…³é—­ iptablesï¼š

```bash
sudo iptables -F
# Ubuntu:
sudo apt install iptables-persistent
sudo netfilter-persistent save
```

## æ€»ç»“

é€šè¿‡ä»¥ä¸Šå››ä¸ªæ­¥éª¤ï¼Œä½ å·²ç»æˆåŠŸå®Œæˆäº† Oracle Cloud å®ä¾‹çš„ç½‘ç»œé…ç½®ï¼š

1. **å®ä¾‹åˆ›å»º** - é€‰æ‹©åˆé€‚çš„é…ç½®å’Œ VCN
2. **VCN ç½‘ç»œç»„ä»¶** - é…ç½® Subnetã€Internet Gateway å’Œ Route Table
3. **Security List** - å¼€æ”¾å¿…è¦çš„ç«¯å£å’Œåè®®
4. **å®ä¾‹é˜²ç«å¢™** - å¤„ç† iptables è§„åˆ™

### å…³é”®è¦ç‚¹

- **åŒé‡é˜²ç«å¢™**ï¼šOracle Cloud æœ‰äº‘ç«¯ Security List å’Œå®ä¾‹å†… iptables ä¸¤å±‚é˜²æŠ¤
- **å®Œæ•´è·¯ç”±**ï¼šç¡®ä¿ Internet Gateway å’Œ Route Table é…ç½®æ­£ç¡®
- **ç«¯å£å¼€æ”¾**ï¼šæ ¹æ®å®é™…éœ€è¦å¼€æ”¾ç‰¹å®šç«¯å£ï¼Œæˆ–ä¸´æ—¶å…¨å¼€è¿›è¡Œæµ‹è¯•
- **æŒä¹…åŒ–é…ç½®**ï¼šé‡è¦çš„ iptables è§„åˆ™éœ€è¦æŒä¹…åŒ–ä¿å­˜

è¿™å¥—æµç¨‹é€‚ç”¨äºå¤§å¤šæ•° Oracle Cloud å®ä¾‹çš„ç½‘ç»œé…ç½®éœ€æ±‚ï¼Œå¯ä»¥ä½œä¸ºæ ‡å‡†æ“ä½œæµç¨‹å‚è€ƒã€‚
